本代码是一个日志清洗处理程序，处理后的数据推送到亚马逊的RDS-mysql数据库中保存。
并提供简单的查询功能，对数据库建立索引优化查询速度。

亚马逊云可以免费试用一年，并且可以使用云服务器，RDS数据库等多项服务，实在是学习的利器。

注册时需要信用卡，我等学生党可以使用父母的信用卡，如果父母很忙，那就到某宝买一个一美元的注册卡，服务很好，电话和地址都可以填自己的，虽然验证电话是英文，但是很容易懂。

ipdata.csv是日志文件，一行的示例：1201,5.8.160.0,5.8.183.255,俄罗斯,CZ88.NET
数据是运营商的ip地址分布，建立自己的数据库之后，你就能查询到全世界ip对应的地址和运营商。
数据以逗号分割，分为5列，分别是行号，起始ip，结束ip，归属地，运营商。

数据完整性：
日志文件都会有脏数据，某些行数据有缺失，注意处理。
ip地址不是完全连续的，这里也需要处理。

数据库采用mysql数据库：
mysql = {
    'host' : 'localdb.ckzqetgzhfi5.ap-southeast-1.rds.amazonaws.com',
    'port' : ‘XXXX’,
    'database' : ‘XXXX’,
    'password' : ‘XXXX’,
    'user' : ‘XXXX’,
    'charset' : 'utf8'
}
上面的XXXX都是你自己的数据，host是你的主机名，注意后面不要跟端口号，端口号下port里写。
由于ip地址是非格式化的，所以这里先将其转换为十进制数存储。具体在代码ip2int中。

Mysql数据库写入大量数据：
Mysql写入大量数据时会出现错误，由于本日志有40+w行数据，所以一次性写入会出错，解决方法是分批写入，这里用block表示分块大小。

为了优化查询，对起始ip和结束ip建立索引，使用事务，加快速度。
